import{S as ce,e as he,s as me,Z as ge,O as R,m as Ne,p as D,Q as K,z as y,u as O,v as B,y as Q,A as L,B as Re,k as T,o as q,x as H,a7 as Te,h as ee,F as V,G as Z,N as S,K as b,U as N,M as G,ar as qe,V as we,T as P,L as le,a1 as He,P as be,R as de,E as Ie,ae as Me,q as Fe,r as Pe}from"./index-8930c306.js";import{B as Ue}from"./Button-18480e49.js";import{B as Ve}from"./BlockLabel-0e311c77.js";import{E as Ke}from"./Empty-a820890c.js";import{u as Oe,S as Qe}from"./ShareButton-5a6fa6e8.js";import{n as te}from"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";import{M as Ze}from"./ModifyUpload-89cc6a3c.js";import{I as ke}from"./Image-e8d04881.js";import"./IconButton-44d258ef.js";const Je=async l=>l?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(l.map(async([e,i])=>e===null?"":await Oe(e.data,"url")))).map(e=>`<img src="${e}" style="height: 400px" />`).join("")}</div>`:"";function ie(l,t,e){const i=l.slice();return i[39]=t[e][0],i[40]=t[e][1],i[42]=e,i}function ne(l,t,e){const i=l.slice();return i[39]=t[e],i[43]=t,i[42]=e,i}function re(l){let t,e;return t=new Ve({props:{show_label:l[0],Icon:ke,label:l[1]||"Gallery"}}),{c(){T(t.$$.fragment)},m(i,n){q(t,i,n),e=!0},p(i,n){const o={};n[0]&1&&(o.show_label=i[0]),n[0]&2&&(o.label=i[1]||"Gallery"),t.$set(o)},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){B(t.$$.fragment,i),e=!1},d(i){H(t,i)}}}function We(l){let t,e,i,n,o,d,s,a=l[8]!==null&&l[4]&&ae(l),u=l[6]&&fe(l),f=Z(l[7]),m=[];for(let r=0;r<f.length;r+=1)m[r]=ue(ie(l,f,r));return{c(){a&&a.c(),t=R(),e=S("div"),i=S("div"),u&&u.c(),n=R();for(let r=0;r<m.length;r+=1)m[r].c();b(i,"class","grid-container svelte-w0jac3"),b(i,"style",o=l[13]+" "+l[14]+" --object-fit: "+l[5]+"; height: "+l[3]),N(i,"pt-6",l[0]),b(e,"class","grid-wrap svelte-w0jac3"),ge(()=>l[35].call(e)),N(e,"fixed-height",!l[3]||l[3]=="auto")},m(r,w){a&&a.m(r,w),D(r,t,w),D(r,e,w),G(e,i),u&&u.m(i,null),G(i,n);for(let c=0;c<m.length;c+=1)m[c]&&m[c].m(i,null);d=qe(e,l[35].bind(e)),s=!0},p(r,w){if(r[8]!==null&&r[4]?a?(a.p(r,w),w[0]&272&&y(a,1)):(a=ae(r),a.c(),y(a,1),a.m(t.parentNode,t)):a&&(O(),B(a,1,1,()=>{a=null}),Q()),r[6]?u?(u.p(r,w),w[0]&64&&y(u,1)):(u=fe(r),u.c(),y(u,1),u.m(i,n)):u&&(O(),B(u,1,1,()=>{u=null}),Q()),w[0]&384){f=Z(r[7]);let c;for(c=0;c<f.length;c+=1){const A=ie(r,f,c);m[c]?m[c].p(A,w):(m[c]=ue(A),m[c].c(),m[c].m(i,null))}for(;c<m.length;c+=1)m[c].d(1);m.length=f.length}(!s||w[0]&24616&&o!==(o=r[13]+" "+r[14]+" --object-fit: "+r[5]+"; height: "+r[3]))&&b(i,"style",o),(!s||w[0]&1)&&N(i,"pt-6",r[0]),(!s||w[0]&8)&&N(e,"fixed-height",!r[3]||r[3]=="auto")},i(r){s||(y(a),y(u),s=!0)},o(r){B(a),B(u),s=!1},d(r){r&&(L(t),L(e)),a&&a.d(r),u&&u.d(),we(m,r),d()}}}function Xe(l){let t,e;return t=new Ke({props:{unpadded_box:!0,size:"large",$$slots:{default:[Ye]},$$scope:{ctx:l}}}),{c(){T(t.$$.fragment)},m(i,n){q(t,i,n),e=!0},p(i,n){const o={};n[1]&8192&&(o.$$scope={dirty:n,ctx:i}),t.$set(o)},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){B(t.$$.fragment,i),e=!1},d(i){H(t,i)}}}function ae(l){let t,e,i,n,o,d,s,a,u,f,m,r,w;e=new Ze({}),e.$on("clear",l[27]);let c=l[7][l[8]][1]&&se(l),A=Z(l[7]),j=[];for(let g=0;g<A.length;g+=1)j[g]=oe(ne(l,A,g));return{c(){t=S("div"),T(e.$$.fragment),i=R(),n=S("img"),a=R(),c&&c.c(),u=R(),f=S("div");for(let g=0;g<j.length;g+=1)j[g].c();b(n,"data-testid","detailed-image"),P(n.src,o=l[7][l[8]][0].data)||b(n,"src",o),b(n,"alt",d=l[7][l[8]][1]||""),b(n,"title",s=l[7][l[8]][1]||null),le(n,"height","calc(100% - "+(l[7][l[8]][1]?"80px":"60px")+")"),b(n,"class","svelte-w0jac3"),N(n,"with-caption",!!l[7][l[8]][1]),b(f,"class","thumbnails scroll-hide svelte-w0jac3"),b(f,"data-testid","container_el"),b(t,"class","preview svelte-w0jac3")},m(g,z){D(g,t,z),q(e,t,null),G(t,i),G(t,n),G(t,a),c&&c.m(t,null),G(t,u),G(t,f);for(let k=0;k<j.length;k+=1)j[k]&&j[k].m(f,null);l[31](f),m=!0,r||(w=[K(n,"click",l[28]),K(t,"keydown",l[16])],r=!0)},p(g,z){if((!m||z[0]&384&&!P(n.src,o=g[7][g[8]][0].data))&&b(n,"src",o),(!m||z[0]&384&&d!==(d=g[7][g[8]][1]||""))&&b(n,"alt",d),(!m||z[0]&384&&s!==(s=g[7][g[8]][1]||null))&&b(n,"title",s),(!m||z[0]&384)&&le(n,"height","calc(100% - "+(g[7][g[8]][1]?"80px":"60px")+")"),(!m||z[0]&384)&&N(n,"with-caption",!!g[7][g[8]][1]),g[7][g[8]][1]?c?c.p(g,z):(c=se(g),c.c(),c.m(t,u)):c&&(c.d(1),c=null),z[0]&896){A=Z(g[7]);let k;for(k=0;k<A.length;k+=1){const E=ne(g,A,k);j[k]?j[k].p(E,z):(j[k]=oe(E),j[k].c(),j[k].m(f,null))}for(;k<j.length;k+=1)j[k].d(1);j.length=A.length}},i(g){m||(y(e.$$.fragment,g),m=!0)},o(g){B(e.$$.fragment,g),m=!1},d(g){g&&L(t),H(e),c&&c.d(),we(j,g),l[31](null),r=!1,He(w)}}}function se(l){let t,e=l[7][l[8]][1]+"",i;return{c(){t=S("div"),i=be(e),b(t,"class","caption svelte-w0jac3")},m(n,o){D(n,t,o),G(t,i)},p(n,o){o[0]&384&&e!==(e=n[7][n[8]][1]+"")&&de(i,e)},d(n){n&&L(t)}}}function oe(l){let t,e,i,n,o,d,s=l[42],a,u;const f=()=>l[29](t,s),m=()=>l[29](null,s);function r(){return l[30](l[42])}return{c(){t=S("button"),e=S("img"),d=R(),P(e.src,i=l[39][0].data)||b(e,"src",i),b(e,"title",n=l[39][1]||null),b(e,"alt",o=l[39][1]||null),b(e,"class","svelte-w0jac3"),b(t,"class","thumbnail-item thumbnail-small svelte-w0jac3"),N(t,"selected",l[8]===l[42])},m(w,c){D(w,t,c),G(t,e),G(t,d),f(),a||(u=K(t,"click",r),a=!0)},p(w,c){l=w,c[0]&128&&!P(e.src,i=l[39][0].data)&&b(e,"src",i),c[0]&128&&n!==(n=l[39][1]||null)&&b(e,"title",n),c[0]&128&&o!==(o=l[39][1]||null)&&b(e,"alt",o),s!==l[42]&&(m(),s=l[42],f()),c[0]&256&&N(t,"selected",l[8]===l[42])},d(w){w&&L(t),m(),a=!1,u()}}}function fe(l){let t,e,i;return e=new Qe({props:{value:l[7],formatter:Je}}),e.$on("share",l[32]),e.$on("error",l[33]),{c(){t=S("div"),T(e.$$.fragment),b(t,"class","icon-button svelte-w0jac3")},m(n,o){D(n,t,o),q(e,t,null),i=!0},p(n,o){const d={};o[0]&128&&(d.value=n[7]),e.$set(d)},i(n){i||(y(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){n&&L(t),H(e)}}}function _e(l){let t,e=l[40]+"",i;return{c(){t=S("div"),i=be(e),b(t,"class","caption-label svelte-w0jac3")},m(n,o){D(n,t,o),G(t,i)},p(n,o){o[0]&128&&e!==(e=n[40]+"")&&de(i,e)},d(n){n&&L(t)}}}function ue(l){let t,e,i,n,o,d,s,a,u=l[40]&&_e(l);function f(){return l[34](l[42])}return{c(){t=S("button"),e=S("img"),o=R(),u&&u.c(),d=R(),b(e,"alt",i=l[40]||""),P(e.src,n=typeof l[39]=="string"?l[39]:l[39].data)||b(e,"src",n),b(e,"class","svelte-w0jac3"),b(t,"class","thumbnail-item thumbnail-lg svelte-w0jac3"),N(t,"selected",l[8]===l[42])},m(m,r){D(m,t,r),G(t,e),G(t,o),u&&u.m(t,null),G(t,d),s||(a=K(t,"click",f),s=!0)},p(m,r){l=m,r[0]&128&&i!==(i=l[40]||"")&&b(e,"alt",i),r[0]&128&&!P(e.src,n=typeof l[39]=="string"?l[39]:l[39].data)&&b(e,"src",n),l[40]?u?u.p(l,r):(u=_e(l),u.c(),u.m(t,d)):u&&(u.d(1),u=null),r[0]&256&&N(t,"selected",l[8]===l[42])},d(m){m&&L(t),u&&u.d(),s=!1,a()}}}function Ye(l){let t,e;return t=new ke({}),{c(){T(t.$$.fragment)},m(i,n){q(t,i,n),e=!0},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){B(t.$$.fragment,i),e=!1},d(i){H(t,i)}}}function pe(l){let t,e,i,n,o,d,s;ge(l[26]);let a=l[0]&&re(l);const u=[Xe,We],f=[];function m(r,w){return r[2]===null||r[7]===null||r[7].length===0?0:1}return e=m(l),i=f[e]=u[e](l),{c(){a&&a.c(),t=R(),i.c(),n=Ne()},m(r,w){a&&a.m(r,w),D(r,t,w),f[e].m(r,w),D(r,n,w),o=!0,d||(s=K(window,"resize",l[26]),d=!0)},p(r,w){r[0]?a?(a.p(r,w),w[0]&1&&y(a,1)):(a=re(r),a.c(),y(a,1),a.m(t.parentNode,t)):a&&(O(),B(a,1,1,()=>{a=null}),Q());let c=e;e=m(r),e===c?f[e].p(r,w):(O(),B(f[c],1,1,()=>{f[c]=null}),Q(),i=f[e],i?i.p(r,w):(i=f[e]=u[e](r),i.c()),y(i,1),i.m(n.parentNode,n))},i(r){o||(y(a),y(i),o=!0)},o(r){B(a),B(i),o=!1},d(r){r&&(L(t),L(n)),a&&a.d(r),f[e].d(r),d=!1,s()}}}function xe(l,t,e){let i,n,{container:o=!0}=t,{show_label:d=!0}=t,{label:s}=t,{root:a=""}=t,{root_url:u=null}=t,{value:f=null}=t,{grid_cols:m=[2]}=t,{grid_rows:r=void 0}=t,{height:w="auto"}=t,{preview:c}=t,{allow_preview:A=!0}=t,{object_fit:j="cover"}=t,{show_share_button:g=!1}=t;const z=Re();let k=!0,E=null,M=f,v=c&&f?.length?0:null,U=v;function J(_){switch(_.code){case"Escape":_.preventDefault(),e(8,v=null);break;case"ArrowLeft":_.preventDefault(),e(8,v=i);break;case"ArrowRight":_.preventDefault(),e(8,v=n);break}}let h=[],F;async function ve(_){if(typeof _!="number")return;await Te(),h[_].focus();const{left:C,width:X}=F.getBoundingClientRect(),{left:I,width:Le}=h[_].getBoundingClientRect(),$=I-C+Le/2-X/2+F.scrollLeft;F?.scrollTo({left:$<0?0:$,behavior:"smooth"})}let W=0,Y=0,p="",x="";function je(){e(12,Y=window.innerHeight)}const ye=()=>e(8,v=null),Ae=()=>e(8,v=n);function Be(_,C){ee[_?"unshift":"push"](()=>{h[C]=_,e(9,h)})}const ze=_=>e(8,v=_);function Ge(_){ee[_?"unshift":"push"](()=>{F=_,e(10,F)})}function Ee(_){V.call(this,l,_)}function Se(_){V.call(this,l,_)}const Ce=_=>e(8,v=_);function De(){W=this.clientHeight,e(11,W)}return l.$$set=_=>{"container"in _&&e(17,o=_.container),"show_label"in _&&e(0,d=_.show_label),"label"in _&&e(1,s=_.label),"root"in _&&e(18,a=_.root),"root_url"in _&&e(19,u=_.root_url),"value"in _&&e(2,f=_.value),"grid_cols"in _&&e(20,m=_.grid_cols),"grid_rows"in _&&e(21,r=_.grid_rows),"height"in _&&e(3,w=_.height),"preview"in _&&e(22,c=_.preview),"allow_preview"in _&&e(4,A=_.allow_preview),"object_fit"in _&&e(5,j=_.object_fit),"show_share_button"in _&&e(6,g=_.show_share_button)},l.$$.update=()=>{if(l.$$.dirty[0]&8388612&&e(23,k=f==null||f.length==0?!0:k),l.$$.dirty[0]&786436&&e(7,E=f===null?null:f.map(_=>Array.isArray(_)?[te(_[0],a,u),_[1]]:[te(_,a,u),null])),l.$$.dirty[0]&29360388&&M!==f&&(k?(e(8,v=c&&f?.length?0:null),e(23,k=!1)):e(8,v=v!==null&&f!==null&&v<f.length?v:null),e(24,M=f)),l.$$.dirty[0]&384&&(i=((v??0)+(E?.length??0)-1)%(E?.length??0)),l.$$.dirty[0]&384&&e(15,n=((v??0)+1)%(E?.length??0)),l.$$.dirty[0]&33554816&&v!==U&&(e(25,U=v),v!==null&&z("select",{index:v,value:E?.[v][1]})),l.$$.dirty[0]&272&&A&&ve(v),l.$$.dirty[0]&1048576){let _=["","sm-","md-","lg-","xl-","2xl-"],C=Array.isArray(m)?m:[m];e(13,p=[0,0,0,0,0,0].map((X,I)=>`--${_[I]}grid-cols: var(--grid-${C?.[I]||C?.[C?.length-1]});`).join(" "))}if(l.$$.dirty[0]&2097152){let _=["","sm-","md-","lg-","xl-","2xl-"],C=Array.isArray(r)?r:[r];e(14,x=[0,0,0,0,0,0].map((X,I)=>`--${_[I]}grid-rows: var(--grid-${C?.[I]||C?.[C?.length-1]});`).join(" "))}},[d,s,f,w,A,j,g,E,v,h,F,W,Y,p,x,n,J,o,a,u,m,r,c,k,M,U,je,ye,Ae,Be,ze,Ge,Ee,Se,Ce,De]}class $e extends ce{constructor(t){super(),he(this,t,xe,pe,me,{container:17,show_label:0,label:1,root:18,root_url:19,value:2,grid_cols:20,grid_rows:21,height:3,preview:22,allow_preview:4,object_fit:5,show_share_button:6},null,[-1,-1])}}function el(l){let t,e,i,n;const o=[l[0]];let d={};for(let s=0;s<o.length;s+=1)d=Ie(d,o[s]);return t=new Me({props:d}),i=new $e({props:{label:l[2],value:l[8],show_label:l[1],root:l[3],root_url:l[4],grid_cols:l[12],grid_rows:l[13],height:l[14],preview:l[15],object_fit:l[17],allow_preview:l[16],show_share_button:l[18]}}),i.$on("select",l[19]),i.$on("share",l[20]),i.$on("error",l[21]),{c(){T(t.$$.fragment),e=R(),T(i.$$.fragment)},m(s,a){q(t,s,a),D(s,e,a),q(i,s,a),n=!0},p(s,a){const u=a&1?Fe(o,[Pe(s[0])]):{};t.$set(u);const f={};a&4&&(f.label=s[2]),a&256&&(f.value=s[8]),a&2&&(f.show_label=s[1]),a&8&&(f.root=s[3]),a&16&&(f.root_url=s[4]),a&4096&&(f.grid_cols=s[12]),a&8192&&(f.grid_rows=s[13]),a&16384&&(f.height=s[14]),a&32768&&(f.preview=s[15]),a&131072&&(f.object_fit=s[17]),a&65536&&(f.allow_preview=s[16]),a&262144&&(f.show_share_button=s[18]),i.$set(f)},i(s){n||(y(t.$$.fragment,s),y(i.$$.fragment,s),n=!0)},o(s){B(t.$$.fragment,s),B(i.$$.fragment,s),n=!1},d(s){s&&L(e),H(t,s),H(i,s)}}}function ll(l){let t,e;return t=new Ue({props:{visible:l[7],variant:"solid",padding:!1,elem_id:l[5],elem_classes:l[6],container:l[9],scale:l[10],min_width:l[11],allow_overflow:!1,height:typeof l[14]=="number"?l[14]:void 0,$$slots:{default:[el]},$$scope:{ctx:l}}}),{c(){T(t.$$.fragment)},m(i,n){q(t,i,n),e=!0},p(i,[n]){const o={};n&128&&(o.visible=i[7]),n&32&&(o.elem_id=i[5]),n&64&&(o.elem_classes=i[6]),n&512&&(o.container=i[9]),n&1024&&(o.scale=i[10]),n&2048&&(o.min_width=i[11]),n&16384&&(o.height=typeof i[14]=="number"?i[14]:void 0),n&4714783&&(o.$$scope={dirty:n,ctx:i}),t.$set(o)},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){B(t.$$.fragment,i),e=!1},d(i){H(t,i)}}}function tl(l,t,e){let{loading_status:i}=t,{show_label:n}=t,{label:o}=t,{root:d}=t,{root_url:s}=t,{elem_id:a=""}=t,{elem_classes:u=[]}=t,{visible:f=!0}=t,{value:m=null}=t,{container:r=!0}=t,{scale:w=null}=t,{min_width:c=void 0}=t,{grid_cols:A=[2]}=t,{grid_rows:j=void 0}=t,{height:g="auto"}=t,{preview:z}=t,{allow_preview:k=!0}=t,{object_fit:E="cover"}=t,{show_share_button:M=!1}=t;function v(h){V.call(this,l,h)}function U(h){V.call(this,l,h)}function J(h){V.call(this,l,h)}return l.$$set=h=>{"loading_status"in h&&e(0,i=h.loading_status),"show_label"in h&&e(1,n=h.show_label),"label"in h&&e(2,o=h.label),"root"in h&&e(3,d=h.root),"root_url"in h&&e(4,s=h.root_url),"elem_id"in h&&e(5,a=h.elem_id),"elem_classes"in h&&e(6,u=h.elem_classes),"visible"in h&&e(7,f=h.visible),"value"in h&&e(8,m=h.value),"container"in h&&e(9,r=h.container),"scale"in h&&e(10,w=h.scale),"min_width"in h&&e(11,c=h.min_width),"grid_cols"in h&&e(12,A=h.grid_cols),"grid_rows"in h&&e(13,j=h.grid_rows),"height"in h&&e(14,g=h.height),"preview"in h&&e(15,z=h.preview),"allow_preview"in h&&e(16,k=h.allow_preview),"object_fit"in h&&e(17,E=h.object_fit),"show_share_button"in h&&e(18,M=h.show_share_button)},[i,n,o,d,s,a,u,f,m,r,w,c,A,j,g,z,k,E,M,v,U,J]}class il extends ce{constructor(t){super(),he(this,t,tl,ll,me,{loading_status:0,show_label:1,label:2,root:3,root_url:4,elem_id:5,elem_classes:6,visible:7,value:8,container:9,scale:10,min_width:11,grid_cols:12,grid_rows:13,height:14,preview:15,allow_preview:16,object_fit:17,show_share_button:18})}}const ml=il,gl=["static"],wl=l=>({type:{payload:"Array<{ name: string } | [{ name: string }, string]>"},description:{payload:"list of objects, with filename and optional caption,"}});export{ml as Component,wl as document,gl as modes};
//# sourceMappingURL=index-32af7272.js.map
